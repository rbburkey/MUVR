<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<div class="jumbotron">
  <div class="container">
    <div class="row">

      <!-- LEFT CONTAINER -->
      <div class="col-md-6">
        <div class="center-block text-center">
          <%= image_tag @job.image.url(:medium) %>
          <h3><%="Job's Name: " + "#{@job.name}"%></h3>
          <h3><%="Area: " + "#{@job.area}"%></h3>
          <h3><%="About: " + "#{@job.description}"%></h3>
          <% if current_user %>
          <%= link_to t('.back', :default => t("helpers.links.back")),
          jobs_path, :class => 'btn btn-default'  %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
          edit_job_path(@job), :class => 'btn btn-default' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
          job_path(@job),
          :method => 'delete',
          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
          :class => 'btn btn-danger' %>
          <% else %>
          <% if @job.jobapps.where(mover_id: current_mover.id).first %>
          <p>Pending Approval</p>
          <% else %>
          <%=link_to "Apply for this Job!", new_job_jobapp_path(@job), :class => 'btn btn-success'%>
          <% end %>
          <% end %>
        </div>
      </div>


      <!-- RIGHT CONTAINER -->
      <div class="col-md-6">
        <div style='width: 500px;'>
          <div id="map" style='width: 500px; height: 350px;'></div>
        </div>

        <script type="text/javascript">
        handler = Gmaps.build('Google');
        handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
          markers = handler.addMarkers(<%=raw @hash.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
        });
        </script>
      </div>



    </div>
  </div>
</div>
</div>
</div>
